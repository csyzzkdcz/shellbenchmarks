M = [ -0.999984  -0.232996  -0.165028   0.820642
 -0.736924  0.0388327   0.373545   0.524396
  0.511211   0.661931   0.177953  -0.475094
-0.0826997  -0.930856   0.860873  -0.905071
 0.0655345  -0.893077   0.692334   0.472164
 -0.562082  0.0594004  0.0538576  -0.343532
 -0.905911   0.342299   -0.81607   0.265277
  0.357729  -0.984604   0.307838   0.512821
  0.358593  -0.233169  -0.168001   0.982075
  0.869386  -0.866316   0.402381  -0.269323];
x1 = [-0.505922  0.965101  0.445321  0.506712]';

y = M*x1;

fun = @(x)dot(M*x - y, M*x-y);

A = [];
b = [];
Aeq = [];
beq = [];

lb = [0,0,0,0]';
ub = [Inf, Inf, Inf, Inf]';


x0 = [0.303037 0.854628 0.263269 0.769414]';
format long
x = fmincon(fun,x0,A,b,Aeq,beq,lb,ub)
fun(x)